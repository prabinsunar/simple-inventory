<!DOCTYPE html>
<html>
	<head>
		<title><%= title %></title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
		/>
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="/stylesheets/style.css" />
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-sm-2"><%- include('partials/sidebar.ejs')%></div>
				<div class="col-sm-10">
					<h1>Create an item</h1>
					<form action="" method="POST">
						<div class="form-group">
							<label for="name">Name</label>
							<input
								id="name"
								class="form-control"
								placeholder="Apple, wire..."
								name="name"
								type="text"
								value="<%= item ? item.name : '' %>"
								required="true"
							/>
						</div>
						<div class="form-group">
							<label for="description">Description</label>
							<input
								id="description"
								class="form-control"
								placeholder="Description"
								name="description"
								type="text"
								value="<%=
                            item ? item.description : '' %>"
								required="true"
							/>
						</div>
						<div class="form-group">
							<label for="category">Category</label>
							<select
								name="category"
								id="category"
								class="form-control"
								required="true"
								type="select"
								placeholder="Select category"
							>
								<% for(let category of categories) {%> <% if (item != false) {%>
								<% if(category._id.toString() == item.category._id.toString())
								{%>
								<option value="<%=category._id%>" selected>
									<%= category.name%>
								</option>
								<% } else { %>
								<option value="<%=category._id%>"><%= category.name%></option>
								<%}%> <% } else {%>
								<option value="<%=category._id%>"><%= category.name%></option>
								<% }%> <%}%>
							</select>
						</div>
						<div class="form-group">
							<label for="price">Price</label>
							<input
								id="price"
								class="form-control"
								placeholder="Price"
								name="price"
								type="number"
								value="<%=
							item ? item.price : 0 %>"
							/>
						</div>
						<div class="form-group">
							<label for="numberStock">Number in stock</label>
							<input
								id="qunatity"
								class="form-control"
								placeholder="Quantity value"
								name="number_in_stock"
								type="number"
								value="<%=
							item ? item.number_in_stock : 0 %>"
							/>
						</div>
						<button class="btn btn-primary" type="submit">Submit</button>
					</form>
					<%if (errors != false) {%>
					<hr />
					<ul>
						<%for(let error of errors) { %>
						<li><%= error.msg%></li>
						<%}%>
					</ul>
					<%}%>
				</div>
			</div>
		</div>
	</body>
</html>
